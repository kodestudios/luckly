<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Perfil</title>

  <style>
    :root{
      --bg1:#ffffff;
      --bg2:#eaf4ff;
      --bg3:#cfe8ff;
      --text:#0f172a;
      --muted:rgba(15,23,42,.72);
      --stroke:rgba(2, 8, 23, .12);
      --card:rgba(255,255,255,.72);
      --glass:rgba(255,255,255,.55);
      --shadow: 0 24px 70px rgba(2,8,23,.18);
      --accent:#2563eb;
      --accent2:#38bdf8;
    }

    *{margin:0;padding:0;box-sizing:border-box;font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif}

    body{
      min-height:100vh;
      color:var(--text);
      overflow-x:hidden;
      background:
        radial-gradient(900px 520px at 15% 10%, rgba(56,189,248,.35), transparent 60%),
        radial-gradient(900px 520px at 85% 20%, rgba(37,99,235,.28), transparent 60%),
        radial-gradient(900px 520px at 50% 90%, rgba(56,189,248,.18), transparent 62%),
        linear-gradient(180deg, var(--bg1), var(--bg2));
    }

    body::before{
      content:"";
      position:fixed;
      inset:-20vh -10vw auto -10vw;
      height:70vh;
      pointer-events:none;
      opacity:.75;
      background-repeat:repeat;
      background-size: 520px 240px;
      filter: blur(.2px);
      transform: translateZ(0);
      animation: cloudsMove 38s linear infinite;
      background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='520' height='240' viewBox='0 0 520 240'%3E%3Cg fill='white' fill-opacity='.85'%3E%3Cellipse cx='120' cy='120' rx='110' ry='52'/%3E%3Cellipse cx='200' cy='118' rx='95' ry='48'/%3E%3Cellipse cx='260' cy='130' rx='125' ry='60'/%3E%3Cellipse cx='355' cy='122' rx='95' ry='46'/%3E%3Cellipse cx='70' cy='138' rx='70' ry='40'/%3E%3Cellipse cx='410' cy='135' rx='85' ry='42'/%3E%3C/g%3E%3C/svg%3E");
    }

    body::after{
      content:"";
      position:fixed;
      inset:auto -10vw -30vh -10vw;
      height:70vh;
      pointer-events:none;
      opacity:.55;
      background-repeat:repeat;
      background-size: 620px 260px;
      filter: blur(1px);
      transform: translateZ(0);
      animation: cloudsMove2 52s linear infinite;
      background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='620' height='260' viewBox='0 0 620 260'%3E%3Cg fill='white' fill-opacity='.75'%3E%3Cellipse cx='140' cy='140' rx='120' ry='56'/%3E%3Cellipse cx='235' cy='136' rx='105' ry='52'/%3E%3Cellipse cx='310' cy='150' rx='140' ry='66'/%3E%3Cellipse cx='430' cy='142' rx='110' ry='54'/%3E%3Cellipse cx='520' cy='152' rx='90' ry='46'/%3E%3C/g%3E%3C/svg%3E");
    }

    @keyframes cloudsMove{
      from{ background-position: 0 0; }
      to{ background-position: 1400px 0; }
    }
    @keyframes cloudsMove2{
      from{ background-position: 0 0; }
      to{ background-position: -1600px 0; }
    }

    .container{max-width:980px;margin:0 auto;padding:22px}

    .shell{
      min-height:72vh;
      display:flex;
      align-items:center;
      justify-content:center;
      margin-top:34px;
      position:relative;
      border-radius:26px;
      border:1px solid var(--stroke);
      background: var(--glass);
      backdrop-filter: blur(18px);
      box-shadow: var(--shadow);
      overflow:hidden;
    }

    .shell::before{
      content:"";
      position:absolute;
      inset:-40%;
      background:
        radial-gradient(closest-side, rgba(56,189,248,.20), transparent 65%),
        radial-gradient(closest-side, rgba(37,99,235,.14), transparent 65%);
      transform: translate(18%, 10%);
      pointer-events:none;
    }

    .enter{
      position:fixed;
      inset:0;
      z-index:9999;
      display:flex;
      align-items:center;
      justify-content:center;
      padding:28px;
      cursor:pointer;
      user-select:none;

      background:
        radial-gradient(900px 520px at 20% 15%, rgba(56,189,248,.35), transparent 60%),
        radial-gradient(900px 520px at 80% 25%, rgba(37,99,235,.28), transparent 60%),
        linear-gradient(180deg, #ffffff, #eef7ff);

      transition: opacity .35s ease, transform .35s ease;
    }

    .enterCard{
      width:min(720px, 92vw);
      border-radius:26px;
      border:1px solid rgba(2,8,23,.10);
      background: rgba(255,255,255,.72);
      backdrop-filter: blur(16px);
      box-shadow: 0 20px 70px rgba(2,8,23,.18);
      padding:26px 22px;
      text-align:center;
      position:relative;
      overflow:hidden;
    }

    .enterTitle{font-weight:950;font-size:34px;color:#0b1224}
    .enterSub{margin-top:10px;color:rgba(15,23,42,.75);font-size:15.5px;line-height:1.5}
    .enterBtn{
      margin-top:18px;
      display:inline-flex;
      align-items:center;
      justify-content:center;
      border:0;
      padding:12px 18px;
      border-radius:999px;
      background: linear-gradient(135deg, var(--accent2), var(--accent));
      color:white;
      font-weight:900;
      box-shadow: 0 16px 35px rgba(37,99,235,.25);
    }
    .enterHint{margin-top:12px;font-size:12.5px;color:rgba(15,23,42,.65)}
    .enterHide{opacity:0;transform: translateY(-6px) scale(.985);pointer-events:none}

    .profile{display:none;width:100%;padding:30px;position:relative}
    .center{text-align:center;display:flex;flex-direction:column;align-items:center;gap:10px}

    .avatarWrap{
      width:126px;height:126px;border-radius:999px;
      padding:4px;
      background: linear-gradient(135deg, rgba(56,189,248,.95), rgba(37,99,235,.95));
      box-shadow: 0 18px 45px rgba(37,99,235,.18);
      margin-top:8px;
    }
    .avatar{
      width:100%;height:100%;
      border-radius:999px;
      object-fit:cover;
      border:4px solid rgba(255,255,255,.92);
      background:rgba(255,255,255,.35);
    }

    .title{font-weight:950;font-size:30px;margin-top:4px;color:#0b1224}
    .muted{color:var(--muted);max-width:680px;line-height:1.65;font-size:15.5px}

    .row{display:flex;gap:10px;flex-wrap:wrap;justify-content:center;align-items:center;margin-top:14px}
    .chip{
      padding:10px 12px;border-radius:999px;
      border:1px solid rgba(2,8,23,.12);
      background: rgba(255,255,255,.60);
      box-shadow: 0 10px 25px rgba(2,8,23,.06);
      color: rgba(15,23,42,.86);
      font-weight:650;font-size:13.5px;
    }

    .badges{display:flex;gap:10px;flex-wrap:wrap;justify-content:center;margin-top:12px;padding-top:10px}
    .badge{width:36px;height:36px;object-fit:contain;filter: drop-shadow(0 10px 16px rgba(2,8,23,.12));transition: transform .2s ease}
    .badge:hover{ transform: translateY(-2px) scale(1.04); }

    /* --------- SOCIAL ICONS (NUEVO) --------- */
    .socials{
      display:flex;
      gap:14px;
      justify-content:center;
      margin-top:12px;
      flex-wrap:wrap;
    }
    .social{
      width:52px;
      height:52px;
      border-radius:999px;
      display:flex;
      align-items:center;
      justify-content:center;
      background: rgba(255,255,255,.72);
      border:1px solid rgba(2,8,23,.14);
      box-shadow: 0 14px 30px rgba(2,8,23,.12);
      transition:.25s;
      text-decoration:none;
    }
    .social:hover{
      transform: translateY(-2px) scale(1.06);
      box-shadow: 0 18px 38px rgba(2,8,23,.18);
      border-color: rgba(37,99,235,.25);
    }
    .social svg{
      width:26px;height:26px;
      fill: rgba(15,23,42,.92);
    }
    /* --------------------------------------- */

    .links{
      display:flex;
      flex-direction:column;
      gap:10px;
      margin-top:14px;
      width:100%;
      max-width:560px;
    }
    .btn{
      padding:13px 16px;border-radius:999px;
      border:1px solid rgba(2,8,23,.14);
      background: rgba(255,255,255,.66);
      color:#0b1224;
      cursor:pointer;
      transition:.22s ease;
      text-decoration:none;
      text-align:center;
      font-weight:900;
      box-shadow: 0 12px 28px rgba(2,8,23,.08);
    }
    .btn:hover{
      transform: translateY(-1px);
      background: rgba(255,255,255,.80);
      border-color: rgba(37,99,235,.25);
      box-shadow: 0 16px 34px rgba(2,8,23,.10);
    }

    #audioWrap, #videoWrap{
      border:1px solid rgba(2,8,23,.12);
      background: rgba(255,255,255,.62);
      border-radius:18px;
      padding:12px;
      box-shadow: 0 12px 26px rgba(2,8,23,.07);
      backdrop-filter: blur(10px);
    }

    @media (max-width:520px){
      .profile{padding:22px}
      .enterTitle{font-size:28px}
      .title{font-size:26px}
      .muted{font-size:14.8px}
    }
  </style>
</head>

<body>
  <div class="container">
    <div class="shell">

      <!-- INTRO FULLSCREEN -->
      <div class="enter" id="enter">
        <div class="enterCard">
          <div class="enterTitle">Bienvenido a tu perfil</div>
          <div class="enterSub">
            Entrá para ver tu información, insignias, links y contenido.
            Todo con un estilo más limpio y moderno.
          </div>
          <div class="enterBtn">Entrar</div>
          <div class="enterHint">Tip: podés tocar/click en cualquier parte</div>
        </div>
      </div>

      <!-- PERFIL -->
      <div class="profile" id="profile">
        <div class="center">
          <div class="avatarWrap">
            <img id="avatar" class="avatar" src="" alt="avatar">
          </div>

          <div class="title" id="name"></div>
          <div class="muted" id="bio"></div>

          <div class="row">
            <div class="chip" id="discordLine">Discord: no conectado</div>
            <div class="chip">Vistas: <span id="views">0</span></div>
          </div>

          <div class="badges" id="badges"></div>

          <!-- SOCIAL ICONS (NUEVO) -->
          <div class="socials" id="socials"></div>

          <!-- LINKS NORMALES -->
          <div class="links" id="links"></div>

          <div style="margin-top:14px;width:100%;max-width:560px" id="audioWrap"></div>
          <div style="margin-top:12px;width:100%;max-width:560px" id="videoWrap"></div>
        </div>
      </div>

    </div>
  </div>

  <!-- Tu lógica actual -->
  <script type="module" src="/luckly/assets/js/router.js"></script>
  <script type="module" src="/luckly/assets/js/page-profile.js"></script>

  <!-- Control del Enter -->
  <script>
    const enter = document.getElementById("enter");
    const profile = document.getElementById("profile");

    enter.addEventListener("click", () => {
      enter.classList.add("enterHide");
      setTimeout(() => { profile.style.display = "block"; }, 180);
      setTimeout(() => { enter.style.display = "none"; }, 420);
    });
  </script>

  <!-- Render social icons automáticamente (NUEVO) -->
  <script>
    const ICONS = {
      discord: `<svg viewBox="0 0 24 24" aria-hidden="true"><path d="M20 4.5a16 16 0 0 0-4-.5l-.2.4a12.6 12.6 0 0 1 3.1 1.2 11.6 11.6 0 0 0-14 0 12.6 12.6 0 0 1 3.1-1.2L8 4a16 16 0 0 0-4 .5C2.5 7.1 2 9.6 2 12.1c0 2.5.7 5 2 7.3a16 16 0 0 0 5-1.6l-.6-1.1c-.7-.2-1.4-.6-2-1a6.2 6.2 0 0 0 .5-.4 11 11 0 0 0 9.2 0l.5.4c-.6.4-1.3.8-2 1l-.6 1.1a16 16 0 0 0 5 1.6c1.3-2.3 2-4.8 2-7.3 0-2.5-.5-5-2-7.6ZM9.2 13.8c-.7 0-1.2-.7-1.2-1.5s.5-1.5 1.2-1.5 1.2.7 1.2 1.5-.5 1.5-1.2 1.5Zm5.6 0c-.7 0-1.2-.7-1.2-1.5s.5-1.5 1.2-1.5 1.2.7 1.2 1.5-.5 1.5-1.2 1.5Z"/></svg>`,
      youtube: `<svg viewBox="0 0 24 24" aria-hidden="true"><path d="M21.6 7.2s-.2-1.6-.8-2.3c-.8-.9-1.6-.9-2-1C15.9 3.6 12 3.6 12 3.6h0s-3.9 0-5.8.3c-.4.1-1.2.1-2 1-.6.7-.8 2.3-.8 2.3S3 9 3 10.8v1.7c0 1.8.4 3.6.4 3.6s.2 1.6.8 2.3c.8.9 1.9.9 2.4 1 1.7.2 5.4.3 5.4.3s3.9 0 5.8-.3c.4-.1 1.2-.1 2-1 .6-.7.8-2.3.8-2.3s.4-1.8.4-3.6v-1.7c0-1.8-.4-3.6-.4-3.6ZM10.2 14.7V8.7l6 3-6 3Z"/></svg>`,
      twitch: `<svg viewBox="0 0 24 24" aria-hidden="true"><path d="M4 3h18v11l-5 5h-4l-2 2H8v-2H4V3Zm2 2v12h4v2l2-2h5l3-3V5H6Zm4 3h2v6h-2V8Zm5 0h2v6h-2V8Z"/></svg>`,
      instagram: `<svg viewBox="0 0 24 24" aria-hidden="true"><path d="M7 2h10a5 5 0 0 1 5 5v10a5 5 0 0 1-5 5H7a5 5 0 0 1-5-5V7a5 5 0 0 1 5-5Zm10 2H7a3 3 0 0 0-3 3v10a3 3 0 0 0 3 3h10a3 3 0 0 0 3-3V7a3 3 0 0 0-3-3Zm-5 3.5A4.5 4.5 0 1 1 7.5 12 4.5 4.5 0 0 1 12 7.5Zm0 2A2.5 2.5 0 1 0 14.5 12 2.5 2.5 0 0 0 12 9.5ZM17.8 6.2a1 1 0 1 1-1 1 1 1 0 0 1 1-1Z"/></svg>`,
      tiktok: `<svg viewBox="0 0 24 24" aria-hidden="true"><path d="M16 3c.6 2.6 2.3 4.3 5 4.6V11c-2-.1-3.7-.7-5-1.7V16a6 6 0 1 1-6-6c.3 0 .7 0 1 .1v3.3c-.3-.1-.6-.2-1-.2a2.7 2.7 0 1 0 2.7 2.7V3h3.3Z"/></svg>`,
      x: `<svg viewBox="0 0 24 24" aria-hidden="true"><path d="M18.9 2H22l-6.8 7.8L23.2 22h-6.9l-5.4-7.1L4.7 22H1.6l7.3-8.4L1 2h7.1l4.9 6.5L18.9 2Zm-1.2 18h1.7L7.2 3.9H5.4L17.7 20Z"/></svg>`,
      facebook: `<svg viewBox="0 0 24 24" aria-hidden="true"><path d="M13.5 22v-8h2.7l.4-3h-3.1V9.1c0-.9.2-1.5 1.5-1.5h1.7V5c-.3 0-1.5-.1-2.8-.1-2.8 0-4.7 1.7-4.7 4.8V11H6v3h3.2v8h4.3Z"/></svg>`,
      github: `<svg viewBox="0 0 24 24" aria-hidden="true"><path d="M12 2a10 10 0 0 0-3.2 19.5c.5.1.7-.2.7-.5v-1.7c-3 .7-3.6-1.3-3.6-1.3-.5-1.2-1.1-1.6-1.1-1.6-.9-.6.1-.6.1-.6 1 .1 1.6 1 1.6 1 .9 1.6 2.4 1.1 3 .8.1-.7.4-1.1.7-1.4-2.4-.3-4.9-1.2-4.9-5.4 0-1.2.4-2.2 1.1-3-.1-.3-.5-1.4.1-2.9 0 0 .9-.3 3 1.1a10.3 10.3 0 0 1 5.5 0c2.1-1.4 3-1.1 3-1.1.6 1.5.2 2.6.1 2.9.7.8 1.1 1.8 1.1 3 0 4.2-2.5 5.1-4.9 5.4.4.3.8 1 .8 2v3c0 .3.2.6.7.5A10 10 0 0 0 12 2Z"/></svg>`,
      web: `<svg viewBox="0 0 24 24" aria-hidden="true"><path d="M12 2a10 10 0 1 0 10 10A10 10 0 0 0 12 2Zm7.9 9h-3.2a15.4 15.4 0 0 0-1.3-6 8 8 0 0 1 4.5 6ZM12 4c.9 1.2 1.7 3.3 2.1 7H9.9c.4-3.7 1.2-5.8 2.1-7ZM4.1 13h3.2a15.4 15.4 0 0 0 1.3 6 8 8 0 0 1-4.5-6Zm3.2-2H4.1a8 8 0 0 1 4.5-6 15.4 15.4 0 0 0-1.3 6Zm2.6 2h4.2c-.4 3.7-1.2 5.8-2.1 7-.9-1.2-1.7-3.3-2.1-7Zm6.8 6a15.4 15.4 0 0 0 1.3-6h3.2a8 8 0 0 1-4.5 6Zm1.3-8a15.4 15.4 0 0 0-1.3-6 8 8 0 0 1 4.5 6h-3.2Z"/></svg>`
    };

    function pickIcon(url){
      const u = String(url || "").toLowerCase();
      if (u.includes("discord")) return "discord";
      if (u.includes("youtube") || u.includes("youtu.be")) return "youtube";
      if (u.includes("twitch")) return "twitch";
      if (u.includes("instagram")) return "instagram";
      if (u.includes("tiktok")) return "tiktok";
      if (u.includes("x.com") || u.includes("twitter")) return "x";
      if (u.includes("facebook")) return "facebook";
      if (u.includes("github")) return "github";
      return "web";
    }

    // Hacerla global para que page-profile.js la use
    window.renderLinks = function(links){
      const socialsEl = document.getElementById("socials");
      const linksEl = document.getElementById("links");
      if (!socialsEl || !linksEl) return;

      socialsEl.innerHTML = "";
      linksEl.innerHTML = "";

      const arr = Array.isArray(links) ? links : [];
      arr.forEach(item => {
        const url = (typeof item === "string") ? item : item?.url;
        const label = (typeof item === "string") ? url : (item?.label || url);
        if (!url) return;

        const key = pickIcon(url);

        // Solo mostramos como ícono los “principales”
        const iconAllowed = ["discord","youtube","twitch","instagram","tiktok","x","facebook","github"].includes(key);

        if (iconAllowed){
          const a = document.createElement("a");
          a.className = "social";
          a.href = url;
          a.target = "_blank";
          a.rel = "noopener noreferrer";
          a.title = label || key;
          a.innerHTML = ICONS[key] || ICONS.web;
          socialsEl.appendChild(a);
        } else {
          const a = document.createElement("a");
          a.className = "btn";
          a.href = url;
          a.target = "_blank";
          a.rel = "noopener noreferrer";
          a.textContent = label || url;
          linksEl.appendChild(a);
        }
      });

      // Si no hay íconos, oculta la fila de íconos
      socialsEl.style.display = socialsEl.children.length ? "flex" : "none";
    };
  </script>
</body>
</html>
